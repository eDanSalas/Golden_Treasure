@if (servicio) {
    <div class="servicio-background" [style.backgroundImage]="'url(' + serImage[servicio.id][0] + ')'">
        <div class="overlay">
            <div class="container text-white text-center py-5">

                <div id="servicioCarousel" class="carousel slide mb-4 mt-5" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        @for (img of serImage[servicio.id]; track img; let i = $index) {
                        <button type="button" data-bs-target="#servicioCarousel" [attr.data-bs-slide-to]="i"
                            [class.active]="i === 0" [attr.aria-current]="i === 0 ? 'true' : null"
                            [attr.aria-label]="'Imagen ' + (i + 1)">
                        </button>
                        }
                    </div>
                    <div class="carousel-inner rounded shadow">
                        @for (img of serImage[servicio.id]; track img; let i = $index) {
                        <div class="carousel-item" [class.active]="i === 0">
                            <img [src]="img" class="d-block w-100 imgCarrusel" [alt]="'Imagen ' + (i + 1)">
                        </div>
                        }
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#servicioCarousel"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Anterior</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#servicioCarousel"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Siguiente</span>
                    </button>
                </div>

                <div class="descripcion-card mb-4">
                    <p class="lead mb-0">{{ servicio.info }}</p>
                </div>


                <button mat-raised-button color="primary" (click)="scrollToFormulario()">
                    Más información
                </button>
            </div>
        </div>
    </div>

    <div class="formulario-container mt-3 mb-3" #formulario>
        <h2>Información de {{ servicio.title }}</h2>
    
        <form #infoForm="ngForm" (ngSubmit)="enviarInfo(infoForm)" novalidate>
    
            <mat-form-field appearance="outline" class="w-100 mb-3">
                <mat-label>Nombre</mat-label>
                <input matInput name="nombre" required [(ngModel)]="modelo.nombre" #nombreCtrl="ngModel">
                @if (nombreCtrl.invalid && nombreCtrl.touched) {
                    <mat-error>El nombre es obligatorio.</mat-error>
                }
            </mat-form-field>
    
            <mat-form-field appearance="outline" class="w-100 mb-3">
                <mat-label>Correo electrónico</mat-label>
                <input matInput name="email" required email [(ngModel)]="modelo.email" #emailCtrl="ngModel">
                @if (emailCtrl.invalid && emailCtrl.touched) {
                    @if (emailCtrl.errors?.['required']) {
                        <mat-error>El correo es obligatorio.</mat-error>
                    }
                    @if (emailCtrl.errors?.['email']) {
                        <mat-error>Ingresa un correo válido.</mat-error>
                    }
                }
            </mat-form-field>
    
            <mat-form-field appearance="outline" class="w-100 mb-3">
                <mat-label>Escribe tus dudas</mat-label>
                <textarea matInput name="duda" required rows="4" [(ngModel)]="modelo.duda" #dudaCtrl="ngModel"></textarea>
                @if (dudaCtrl.invalid && dudaCtrl.touched) {
                    <mat-error>Este campo es obligatorio.</mat-error>
                }
            </mat-form-field>
    
            <div class="checkbox-container">
                <mat-checkbox name="aceptaFAQ" required [(ngModel)]="modelo.aceptaFAQ" #aceptaCtrl="ngModel">
                    Acepto que mi duda se publique en la pestaña FAQ
                </mat-checkbox>
                @if (aceptaCtrl.invalid && aceptaCtrl.touched) {
                    <div class="text-danger small mt-1">Debes aceptar para continuar.</div>
                }
            </div>
    
            <button mat-raised-button color="accent" class="mt-4" type="submit" [disabled]="infoForm.invalid">
                <mat-icon class="me-2">send</mat-icon> Enviar
            </button>

        </form>
    </div>


} @else {
    <div class="cargando-container">
        <h1>Cargando la información del Servicio</h1>
        <mat-spinner class="gold-spinner" diameter="80" strokeWidth="6"></mat-spinner>
    </div>
}